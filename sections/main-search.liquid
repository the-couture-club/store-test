{% comment %}theme-check-disable TemplateLength{% endcomment %}
<style>
.mfp-container .collection-sidebar,
.mfp-container .collection-sidebar .mfp-close {
    background-color: {{ settings.color_drawer_bg }};
}
</style>

{%- liquid
    assign sort_by = search.sort_by | default: search.default_sort_by
    assign limit = section.settings.grid | times: section.settings.rows

    assign filter_exists = false
    if section.settings.show_sidebar
        assign filter_exists = true
    endif

    assign show_main_sort = false
    if section.settings.show_sidebar == false or filter_exists == false
        if section.settings.sort_enable
            assign show_main_sort = true
        endif
    endif

    if settings.swatches_trigger != '' and section.settings.show_swatches and  settings.swatches_enabled
        assign swatches_enabled = true
        assign triggers_raw = settings.swatches_trigger | newline_to_br | strip_newlines | split: '<br />'
        assign triggers = '' | split: ','
        for trigger in triggers_raw
            assign t = trigger | strip | downcase | split: ','
            assign triggers = triggers | concat: t
        endfor
    endif

    assign dynamic_checkout_enabled = false
    if settings.quick_shop_enabled and settings.quick_shop_payment_button
        assign dynamic_checkout_enabled = true
    endif
-%}

<section class="section section--{{ section.id }} section--search search-page" data-section-id="{{ section.id }}" data-section-type="search-template">
    <dynamic-product-search
        class="
            collection
            collection--sidebar-sidebar
            {% if collection.image and section.settings.show_collection_image %}collection--img{% endif %}
            {% if section.settings.center_title %} collection--center{% endif %}
        "
        data-section="{{ section.id }}"
        data-url="{{ routes.search_url }}"
        data-quick-shop-dynamic-checkout="{{ dynamic_checkout_enabled }}"
        data-page-title="{% render 'seo-title' %}"
    >

        {%- liquid
            assign mobile_sizes = 100 | divided_by: section.settings.grid_mobile
            assign sizes = mobile_sizes
             case section.settings.grid
                 when 2
                    assign grid_item_width = 'u-1/2@phab'
                    assign sizes = '(min-width: 561px) 50vw, ' | append: mobile_sizes | append: 'vw'
                     if section.settings.show_sidebar
                        assign container_size = 'default'
                     else
                        assign container_size = 'large'
                     endif
                 when 3
                    assign grid_item_width = 'u-1/2@phab u-1/3@tab'
                    assign sizes = '(min-width: 561px) 50vw, (min-width: 768px) 33vw, ' | append: mobile_sizes | append: 'vw'
                     if section.settings.show_sidebar
                        assign container_size = 'default'
                     else
                        assign container_size = 'large'
                     endif
                 when 4
                     if section.settings.show_sidebar
                        assign grid_item_width = 'u-1/3@tab u-1/4-grid-desk'
                     else
                        assign grid_item_width = 'u-1/3@tab u-1/4@desk'
                     endif
                    assign container_size = 'default'
                    assign sizes = '(min-width: 768px) 33vw, (min-width: 981px) 25vw, ' | append: mobile_sizes | append: 'vw'
             endcase
        -%}

        <div class="container container--{{ container_size }}">

            <div class="section__title section__title--center">
                <h1 class="section__title-text cc-fs1 cc-uppercase">{% if search.performed %}{{ 'general.search.title_results' | t }}{% else %}{{ 'general.search.title' | t }}{% endif %}</h1>
            </div>

            {%- if settings.search_predictive_enable -%}
            <script src="{{ 'predictive-search.js' | asset_url }}" type="module"></script>
            <predictive-search dropdown type="main" search-url="{{ routes.search_url }}">
            {%- endif -%}
            <search-form add-recent-search-on-load>
                <form is="search-form" action="{{ routes.search_url }}" method="get" class="search-page__form js-search-form" role="search">
                    <div class="search-form__input-wrapper">
                        <input
                            id="main-search"
                            type="search"
                            name="q"
                            value="{{ search.terms | escape }}"
                            placeholder="{{ 'general.search.placeholder' | t }}"
                            class="search-page__form-input cc-fs1 cc-uppercase"
                            aria-label="{{ 'general.search.placeholder' | t }}"
                            {%- if settings.search_predictive_enable -%}
                              role="combobox"
                              aria-expanded="false"
                              aria-owns="main-predictive-search-results"
                              aria-controls="main-predictive-search-results"
                              aria-haspopup="listbox"
                              aria-autocomplete="list"
                              autocorrect="off"
                              autocomplete="off"
                              autocapitalize="off"
                              spellcheck="false"
                            {%- endif -%}
                        >

                        <button type="submit" class="search-page__form-submit" aria-label="{{ 'general.search.submit' | t }}">
                            {% render 'icon-search' %}
                        </button>
                    </div>

                    {%- if settings.search_predictive_enable -%}
                        <predictive-search-results tabindex="-1" hidden></predictive-search-results>
                    {%- endif -%}
                </form>
            </search-form>
            {%- if settings.search_predictive_enable -%}
            </predictive-search>
            {%- endif -%}

            {%- if search.performed -%}
                {% if template.name == 'search' %}
                    {% render 'search-redirect' search: search %}
                {% endif %}
                
                {%- if search.results_count < 1  and search.filters.size < 1 -%}

                    <div class="search-page__info"><p class="search-page__info__text">{{ 'general.search.no_results_html' | t: terms: search.terms }}</p></div>

                {%- else -%}

                    {% paginate search.results by 60 %}

                        <div class="collection-main collection-main--search" id="collection-main">

                        <div class="collection-main__actions">
                        {% comment %}Sidebar blocks count{% endcomment %}
                            <div class="collection-main__filter">
                                <a href="#" class="collection-main__filter-btn c-btn--full cc-fs2 cc-uppercase js-collection-draw-trigger">
                                {%- if show_main_sort == false and section.settings.sort_enable -%}
                                    {{ 'collections.general.filter_sort_label' | t }}
                                {%- else -%}
                                    {{ 'collections.general.filter_label' | t }}
                                {%- endif -%}
                                </a>
                            </div>
                        {% comment %}Sidebar blocks count{% endcomment %}
    
                        {% if show_main_sort %}
                            <form class="js-sort-form" data-submit-on-change="true">
                                <div class="collection-main__sort ">
                                    <div class="selector-wrapper collection-main__sort__selector">
                                        <label class="collection-filters__label" for="SortBy">{{ 'collections.sorting.title' | t }}</label>
    
                                        {%- assign sort_by = search.sort_by | default: search.default_sort_by -%}
                                        <select name="sort_by" class="select__select js-collection-sort" id="SortBy">
                                            {%- for option in search.sort_options -%}
                                                <option value="{{ option.value | escape }}"{% if option.value == sort_by %} selected="selected"{% endif %}>{{ option.name | escape }}</option>
                                            {%- endfor -%}
                                        </select>
    
                                            <input type="submit" class="c-btn c-btn--primary" value="{{ 'collections.sorting.sort_button' | t }}">
    
                                    </div>
                                </div>
                            </form>
                        {% endif %}
    
                        <div class="collection-main__bar">
                            <div class="u-hidden@tab-up collection-main__bar--grid">
                                <div data-grid="1">{% include 'icon-grid-1' %}</div>
                                <div data-grid="2">{% include 'icon-grid-2' %}</div>
                            </div>
                            <span class="cc-fs2"><span id="loaded-products">{% if paginate.current_page == paginate.pages %}{{paginate.items}}{% else %}{{paginate.page_size | times: paginate.current_page }}{% endif %}</span> / {{ 'general.search.results_count' | t: count: search.results_count }}</span>
                            <div data-type="Search" data-title="{{ search.terms }}" class="u-hidden@tab-down collection-main__bar--toggle cc-fs2 cc-uppercase">
                                <span>{{ "custom.model_layout_title" | t | uppercase }}</span>
                                <label class="switch">
                                    <input for="collection-model-toggle" type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div> 
                        </div>
    
                    </div>

                            <div class="collection-products{% if show_main_sort == false and section.settings.sort_enable %} collection-products--sort-enabled{% endif %}">

                                {% comment %}Sidebar blocks count{% endcomment %}
                                {% if section.settings.show_sidebar %}
                                <div class="o-layout">

                                    <div data-filters class="o-layout__item u-1/1 u-1/4-sidebar-desk u-1/5-sidebar-wide">
                                        <aside class="collection-sidebar collection-sidebar--{{ settings.color_drawer_style }} js-collection-draw">
                                            <div class="collection-sidebar__wrapper">

                                            <div class="mobile-draw__fixed mobile-draw__header">
                                                <span class="cc-fs1 cc-uppercase">Search</span>
                                                <a class="cc-fs1 cc-uppercase cc-underline cc-pointer js-close-mfp">Close</a>
                                            </div>

                                                {%- assign filter_count = 0 -%}
                                                {%- for filter in search.filters -%}
                                                    {%- assign filter_count = filter_count | plus: filter.active_values.size -%}
                                                {%- endfor -%}

                                                <div class="collection-sidebar__section collection-sidebar__section--filter collection-sidebar__filter">

                                                    <form class="collection-sidebar__filter-form js-filters-form" data-submit-on-change="true">
                                                        <input type="hidden" name="q" value="{{ search.terms }}">
                                                        {% if section.settings.sort_enable %}
                                                            <div class="collection-sidebar__filter__sort ">
                                                                <div class="selector-wrapper collection-sidebar__filter__sort__selector">
                                                                    <label class="collection-filters__label" for="SortBy">{{ 'collections.sorting.title' | t }}</label>

                                                                    {%- assign sort_by = search.sort_by | default: search.default_sort_by -%}
                                                                    <select name="sort_by" class="select__select collection-filters__sort js-collection-sort" id="SortBy">
                                                                        {%- for option in search.sort_options -%}
                                                                            <option value="{{ option.value | escape }}"{% if option.value == sort_by %} selected="selected"{% endif %}>{{ option.name | escape }}</option>
                                                                        {%- endfor -%}
                                                                    </select>

                                                                    <noscript>
                                                                        <input type="submit" class="c-btn c-btn--primary" value="{{ 'collections.sorting.sort_button' | t }}">
                                                                    </noscript>

                                                                </div>
                                                            </div>
                                                        {% endif %}

                                                        <accordion-group>

                                                            <details
                                                                open
                                                                id="{{ section.id }}-filter-{{ forloop.index }}"
                                                                class="sort_by"
                                                            >

                                                                <summary class="collection-sidebar__filter-trigger">
                                                                    <span>Sort By</span>
                                                                    <summary-icon>
                                                                        <i class="icon icon--down" aria-hidden="true"></i>
                                                                    </summary-icon>
                                                                </summary>

                                                                <details-content class="collection-sidebar__filter__accordion">
                                                                    <ul class="collection-sidebar__items o-list-bare">
                                                                        {%- for option in search.sort_options -%}
                                                                        <div {% if option.value == sort_by %} selected="selected"{% endif %} class="collection-sidebar__items--sort cc-fs1">
                                                                        <input {% if option.value == sort_by %}checked{% endif %} type="radio" name="sort_by" value="{{ option.value | escape }}">
                                                                        <span>{{ option.name | escape }}</span>
                                                                        </div>
                                                                        {%- endfor -%}
                                                                    </ul>
                                                                </details-content>
                                                            </details>
                                                        
                                                        {%- for filter in search.filters -%}
                                                            {%- liquid
                                                                assign accordion_open = true
                                                            -%}
                                                            {%- case filter.type -%}
                                                            {%- when 'list' -%}

                                                                {%- liquid
                                                                    assign filter_label = filter.label | escape | strip | downcase
                                                                -%}
                                                                
                                                                

                                                                <details
                                                                    {% if filter.active_values.size > 0 %}open{% endif %}
                                                                    id="{{ section.id }}-filter-{{ forloop.index }}"
                                                                    class="collection-sidebar__filter-group"
                                                                    {% if forloop.index == 1 %}first='true'{% endif %}
                                                                >

                                                                    <summary class="collection-sidebar__filter-trigger">
                                                                        <span>{{ filter.label |  replace: 'Availability', 'OUT OF STOCK PRODUCTS'  }}</span>
                                                                        <summary-icon>
                                                                            <i class="icon icon--plus" aria-hidden="true"></i>
                                                                        </summary-icon>
                                                                    </summary>

                                                                    {% case filter_label %}
                                                                    
                                                                        {% when 'colour' %}

                                                                        <details-content class="collection-sidebar__filter__accordion">
                                                                            <ul class="collection-sidebar__items o-list-bare">
                                                                                {% assign colour_filters = settings.colour_filters | downcase | split: ',' %}
                                                                                {%- for filter_value in filter.values -%}
                                                                                    {% for colour in colour_filters %}
                                                                                        {% assign colour_downcase = colour | downcase | strip %}
                                                                                        {% assign filter_downcase = filter_value.label | downcase | strip %}
                                                                                        {% if colour_downcase == filter_downcase %}
                                                                                            <li class="collection-sidebar__item{% if filter_value.count == 0 and filter_value.active == false %} collection-sidebar__item--disabled{% endif %}">
                                                                                                <input type="checkbox"
                                                                                                    name="{{ filter_value.param_name }}"
                                                                                                    value="{{ filter_value.value }}"
                                                                                                    class="collection-sidebar__filter__input"
                                                                                                    id="Filter-{{ filter.label }}-{{ forloop.index }}"
                                                                                                    {% if filter_value.active -%} checked{%- endif %}
                                                                                                    {% if filter_value.count == 0 and filter_value.active == false %} disabled{% endif %}
                                                                                                >
                                                                                                <label for="Filter-{{ filter.label }}-{{ forloop.index }}" class="collection-sidebar__link js-filter-label cc-fs1">
                                                                                                    
                                                                                                    {{ filter_value.label | escape }}
                                                                                                    {% if block.settings.count %}
                                                                                                        <span class="collection-sidebar__link__count">{{ filter_value.count }}</span>
                                                                                                    {% endif %}
                                                                                                </label>
                                                                                            </li>
                                                                                        {%endif%}
                                                                                    {% endfor %}
                                                                                {%- endfor -%}
                                                                            </ul>
                                                                        </details-content>

                                                                        {% when 'product type' %}

                                                                        <details-content class="collection-sidebar__filter__accordion">
                                                                            <ul class="collection-sidebar__items o-list-bare">
                                                                                {%- for filter_value in filter.values -%}
                                                                                    <li class="collection-sidebar__item{% if filter_value.count == 0 and filter_value.active == false %} collection-sidebar__item--disabled{% endif %}">

                                                                                        <input type="checkbox"
                                                                                            name="{{ filter_value.param_name }}"
                                                                                            value="{{ filter_value.value }}"
                                                                                            class="collection-sidebar__filter__input"
                                                                                            id="Filter-{{ filter.label }}-{{ forloop.index }}"
                                                                                            {% if filter_value.active -%} checked{%- endif %}
                                                                                            {% if filter_value.count == 0 and filter_value.active == false %} disabled{% endif %}
                                                                                        >
                                                                                        <label for="Filter-{{ filter.label }}-{{ forloop.index }}" class="collection-sidebar__link js-filter-label cc-fs1">
                                                                                            
                                                                                            {{ filter_value.label | remove: "WOMEN'S" | remove: "MEN'S" | escape }}
                                                                                            {% if block.settings.count %}
                                                                                                <span class="collection-sidebar__link__count">{{ filter_value.count }}</span>
                                                                                            {% endif %}
                                                                                        </label>
                                                                                    </li>
                                                                                {%- endfor -%}
                                                                            </ul>
                                                                        </details-content>

                                                                        {% when 'sizes' %}

                                                                        <details-content class="collection-sidebar__filter__accordion">
                                                                            <ul class="collection-sidebar__items o-list-bare">
                                                                                    {%- for filter_value in filter.values -%}
                                                                                        {% unless forloop.index == 1 or forloop.index == 2 %}
                                                                                            
                                                                                    
                                                                                        <li class="collection-sidebar__item{% if filter_value.count == 0 and filter_value.active == false %} collection-sidebar__item--disabled{% endif %}">
                                                                                        
                    
                                                                                            <input type="checkbox"
                                                                                                name="{{ filter_value.param_name }}"
                                                                                                value="{{ filter_value.value }}"
                                                                                                class="collection-sidebar__filter__input"
                                                                                                id="Filter-{{ filter.label }}-{{ forloop.index }}"
                                                                                                {% if filter_value.active or filter_value.param_name == 'filter.v.availability' and filter_value.value == '1' -%} checked{%- endif %}
                                                                                                {% if filter_value.count == 0 and filter_value.active == false %} disabled{% endif %}
                                                                                            >
                                                                                            
                                                                                            <label for="Filter-{{ filter.label }}-{{ forloop.index }}" class="collection-sidebar__link js-filter-label cc-fs1">
                                                                                                
                                                                                                {{ filter_value.label | escape | replace: 'Out of stock', 'INCLUDE OUT OF STOCK PRODUCTS'  }}
                                                                                                {% if block.settings.count %}
                                                                                                    <span class="collection-sidebar__link__count">{{ filter_value.count }}</span>
                                                                                                {% endif %}
                                                                                            </label>
                                                                                        </li>
                                                                                        {% endunless %}
                                                                                    {%- endfor -%}
                                                                            </ul>
                                                                        </details-content>

                                                                        {% when 'availability' %}

                                                                            <details-content class="collection-sidebar__filter__accordion">
                                                                            <ul class="collection-sidebar__items o-list-bare">

                                                                            {%- for filter_value in filter.values -%}
                                                                            <li {% if forloop.index == 2 %}aria-filter={{ filter.values[1].active }}{% endif %} hidden class="collection-sidebar__item{% if filter_value.count == 0 and filter_value.active == false %} collection-sidebar__item--disabled{% endif %}">
                                                                                
                                                                                <input type="checkbox"
                                                                                    name="{{ filter_value.param_name }}"
                                                                                    value="{{ filter_value.value }}"
                                                                                    {% if filter_value.active %} active {% endif %}
                                                                                    class="collection-sidebar__filter__input"
                                                                                    id="Filter-{{ filter.label }}-{{ forloop.index }}"
                                                                                    {% if filter_value.active or filter_value.param_name == 'filter.v.availability' and filter_value.value == '1' -%} checked{%- endif %}
                                                                                    {% if filter_value.count == 0 and filter_value.active == false %} disabled{% endif %}
                                                                                >
                                                                                <label for="Filter-{{ filter.label }}-{{ forloop.index }}" class="collection-sidebar__link js-filter-label cc-fs1">
                                                                                    
                                                                                    {{ filter_value.label | escape | replace: 'Out of stock', 'SHOW OUT OF STOCK PRODUCTS'  }}
                                                                                    {% if block.settings.count %}
                                                                                        <span class="collection-sidebar__link__count">{{ filter_value.count }}</span>
                                                                                    {% endif %}
                                                                                </label>
                                                                            </li>
                                                                        {%- endfor -%}
                                                                            <div class="collection-sidebar__filter__availability">
                                                                                <div {% if filter.values[1].active %} active {% endif %} class="collection-sidebar__filter__availability--item">SHOW</div>
                                                                                <div {% unless filter.values[1].active %} active {% endunless %} class="collection-sidebar__filter__availability--item">HIDE</div>
                                                                            </div>

                                                                            </ul>
                                                                        </details-content>
                                                                        

                                                                        {% else %}

                                                                        <details-content class="collection-sidebar__filter__accordion">
                                                                            <ul class="collection-sidebar__items o-list-bare">

                                                                            {%- for filter_value in filter.values -%}
                                                                                <li class="collection-sidebar__item{% if filter_value.count == 0 and filter_value.active == false %} collection-sidebar__item--disabled{% endif %}">

                                                                                    <input type="checkbox"
                                                                                        name="{{ filter_value.param_name }}"
                                                                                        value="{{ filter_value.value }}"
                                                                                        class="collection-sidebar__filter__input"
                                                                                        id="Filter-{{ filter.label }}-{{ forloop.index }}"
                                                                                        {% if filter_value.active -%} checked{%- endif %}
                                                                                        {% if filter_value.count == 0 and filter_value.active == false %} disabled{% endif %}
                                                                                    >
                                                                                    <label for="Filter-{{ filter.label }}-{{ forloop.index }}" class="collection-sidebar__link js-filter-label cc-fs1">
                                                                                        
                                                                                        {{ filter_value.label | remove: "WOMEN'S" | remove: "MEN'S" | escape }}
                                                                                        {% if block.settings.count %}
                                                                                            <span class="collection-sidebar__link__count">{{ filter_value.count }}</span>
                                                                                        {% endif %}
                                                                                    </label>
                                                                                </li>
                                                                            {%- endfor -%}
                                                                                        
                                                                            
                                                                            </ul>
                                                                        </details-content>

                                                                    {% endcase %}


                                                                </details>
                                                            

                                                            {%- when 'price_range' -%}

                                                                <details
                                                                    {% if accordion_open %}open{% endif %}
                                                                    id="{{ section.id }}-filter-{{ forloop.index }}"
                                                                    class="collection-sidebar__filter-group collection-sidebar__filter-group--price"
                                                                    {% if forloop.index == 1 %}first='true'{% endif %}
                                                                {%- if filter.min_value.value > 0 -%}open{%- endif -%}
                                                                >

                                                                    <summary class="collection-sidebar__filter-trigger">
                                                                        <span>{{ filter.label }}</span>
                                                                        <summary-icon>
                                                                            <i class="icon icon--plus" aria-hidden="true"></i>
                                                                        </summary-icon>
                                                                    </summary>

                                                                    <details-content class="collection-sidebar__filter__accordion">
                                                                        <div class="collection-sidebar__items">
                                                                            <price-range class="price-range">

                                                                                {%- assign price_filter_min_value = filter.min_value.value | divided_by: 100.00 | ceil  -%}
                                                                                {%- assign price_filter_max_value = filter.max_value.value | divided_by: 100.00 | ceil -%}
                                                                                {%- assign price_filter_range_max = filter.range_max | divided_by: 100.00 | ceil -%}

                                                                                <div class="collection-sidebar__filter-price">

                                                                                    <div class="collection-sidebar__filter-price__item collection-sidebar__filter-price__item--from">
                                                                                        <span class="collection-sidebar__filter-price__currency">{{ cart.currency.symbol }}</span>

                                                                                        <input name="{{ filter.min_value.param_name }}"
                                                                                        id="Filter-{{ filter.label }}-min-{{ forloop.index }}"
                                                                                        class="collection-sidebar__filter-price__input price-range__number"
                                                                                        {% if filter.min_value.value -%}
                                                                                            value="{{ price_filter_min_value }}"
                                                                                        {%- endif %}
                                                                                        type="number"
                                                                                        inputmode="numeric"
                                                                                        placeholder="0"
                                                                                        min="0"
                                                                                        max="{{ price_filter_range_max }}"
                                                                                        >
                                                                                        <label for="Filter-{{ filter.label }}-min-{{ forloop.index }}" class="collection-sidebar__filter-price__label">{{ 'collections.general.from' | t }}</label>
                                                                                    </div>

                                                                                    <div class="collection-sidebar__filter-price__item collection-sidebar__filter-price__item--separator">-</div>


                                                                                    <div class="collection-sidebar__filter-price__item collection-sidebar__filter-price__item--to">
                                                                                        <span class="collection-sidebar__filter-price__currency">{{ cart.currency.symbol }}</span>
                                                                                        <input name="{{ filter.max_value.param_name }}"
                                                                                        id="Filter-{{ filter.label }}-max-{{ forloop.index }}"
                                                                                        class="collection-sidebar__filter-price__input price-range__number"
                                                                                        {% if filter.max_value.value -%}
                                                                                            value="{{ price_filter_max_value }}"
                                                                                        {%- endif %}
                                                                                        type="number"
                                                                                        inputmode="numeric"
                                                                                        placeholder="{{ price_filter_range_max }}"
                                                                                        min="0"
                                                                                        max="{{ price_filter_range_max }}"
                                                                                        >

                                                                                        <label for="Filter-{{ filter.label }}-max-{{ forloop.index }}" class="collection-sidebar__filter-price__label">{{ 'collections.general.to' | t }}</label>
                                                                                    </div>
                                                                                </div>

                                                                                <div class="price-range__group">
                                                                                    <div class="price-range__track">
                                                                                        <label class="u-hidden-visually" for="Filter-Price-Track-1">Price range mininum</label>
                                                                                        <input class="price-range__input"
                                                                                            {%- if filter.min_value.value -%}
                                                                                                value="{{ price_filter_min_value }}"
                                                                                            {%- else -%}
                                                                                                value="0"
                                                                                            {%- endif -%}
                                                                                            min="0"
                                                                                            max="{{ price_filter_range_max }}"
                                                                                            type="range"
                                                                                            tabindex="-1"
                                                                                            id="Filter-Price-Track-1"
                                                                                        >
                                                                                        <label class="u-hidden-visually" for="Filter-Price-Track-2">Price range maximum</label>
                                                                                        <input class="price-range__input"
                                                                                            {%- if filter.max_value.value -%}
                                                                                                value="{{ price_filter_max_value }}"
                                                                                            {%- else -%}
                                                                                                value="{{ price_filter_range_max }}"
                                                                                            {%- endif -%}
                                                                                            min="0"
                                                                                            max="{{ price_filter_range_max }}"
                                                                                            type="range"
                                                                                            tabindex="-1"
                                                                                            id="Filter-Price-Track-2"
                                                                                        >
                                                                                    </div>
                                                                                </div>
                                                                            </price-range>
                                                                        </div>
                                                                    </details-content>
                                                                </details>

                                                        {%- endcase -%}
                                                        {%- endfor -%}
                                                        </accordion-group>

                                                        <noscript>
                                                            <input type="submit" class="collection-sidebar__filter-submit c-btn c-btn--primary" value="{{ 'collections.general.apply' | t }}">
                                                        </noscript>

                                                    </form>
                                                </div>


                                            </div>
                                            <div class="collection-sidebar__draw-actions">
                                                {%- liquid
                                                    assign filters_present = false
                                                    for filter in search.filters
                                                        for filter_value in filter.active_values
                                                            assign filters_present = true
                                                            break
                                                        endfor
                                                        if filters_present
                                                            break
                                                        endif
                                                        if filter.type == "price_range"
                                                            if filter.min_value.value != nil or filter.max_value.value != nil
                                                                assign filters_present = true
                                                                break
                                                            endif
                                                        endif
                                                    endfor
                                                -%}
                                                <div class="o-layout o-layout--small">
                                                    <div class="o-layout__item u-1/1">
                                                        <button
                                                            type="button"
                                                            data-url="{{ routes.search_url }}?types={{ search.types | join: ',' | url_encode }}&q={{ search.terms }}&sort_by={{ sort_by }}"
                                                            class="c-btn cc-btn c-btn--hollow c-btn--full js-filter-trigger"
                                                            {% if filters_present == false %}disabled{% endif %}
                                                        >
                                                            {{ 'collections.general.tags_clear_all' | t }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </aside>
                                    </div>

                                    <div class="o-layout__item u-1/1">

                                    {% if canonical_url contains "page=" %}
                                        <div id="collection-load_container">
                                            <button class="cc-uppercase js-collection-load js-collection-load-previous">
                                                <span class="cc-fs2">{{ 'collections.general.previous_page' | t }}</span>
                                                <span class="product-form__add-btn__tick"><i class="icon icon--tick"></i></span>
                                                <div class="theme-spinner">
                                                    <div class="theme-spinner__border"></div>
                                                    <div class="theme-spinner__border"></div>
                                                    <div class="theme-spinner__border"></div>
                                                    <div class="theme-spinner__border"></div>
                                                </div>
                                            </button>
                                        </div>
                                    {% endif %}
                                    

                                {% endif %}
                                {% comment %}Sidebar blocks count{% endcomment %}

                                        <div class="collection__filters-active">
                                            <div class="collection__filters-active__wrapper">
                                                <a href="{{ routes.search_url }}?types={{ search.types | join: ',' | url_encode }}&q={{ search.terms }}&sort_by={{ sort_by }}" class="collection__filters-active__filter collection__filters-active__filter--clear js-filter-trigger">{{ 'collections.general.tags_clear_all' | t }}</a>
                                                {%- for filter in search.filters -%}
                                                    {%- for filter_value in filter.active_values -%}
                                                        <a class="collection__filters-active__filter js-filter-trigger" href="{{ filter_value.url_to_remove }}">{{ filter_value.label | escape }}</a>
                                                    {%- endfor -%}

                                                    {% if filter.type == "price_range" %}
                                                        {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
                                                            <a href="{{ filter.url_to_remove }}" class="collection__filters-active__filter js-filter-trigger">
                                                                <span>
                                                                    {% if filter.min_value.value %}
                                                                        {{ filter.min_value.value | money }}
                                                                    {% else %}
                                                                        {{ 0 | money }}
                                                                    {% endif %}
                                                                     -
                                                                    {% if filter.max_value.value %}
                                                                        {{ filter.max_value.value | money }}
                                                                    {% else %}
                                                                        {{ filter.range_max | money }}
                                                                    {% endif %}
                                                                </span>
                                                            </a>
                                                        {%- endif -%}
                                                    {%- endif -%}
                                                {%- endfor -%}
                                            </div>
                                        </div>

                                        <div class="
                                            collection__cards
                                            o-layout
                                            {% if settings.product_grid_masonry %}o-layout--masonry{% endif %}
                                            {% if section.settings.grid == 4 %}o-layout--small{% endif %}
                                            {% if section.settings.grid_mobile == '2' %}o-layout--small@tab-down{% endif %}
                                            "
                                            aria-view="1/2"
                                        >
                                            {%- for item in search.results -%}

                                                {%- case item.object_type -%}
                                                {%- when 'product' -%}
                                                    {%- liquid
                                                        assign small_buttons_on_mobile = false
                                                        if section.settings.grid_mobile == '2'
                                                            assign small_buttons_on_mobile = true
                                                        endif
                                                    -%}
                                                    <div data-product-grid data-page="{{paginate.current_page}}" class="o-layout__item">
                                                        {% render 'product-grid-item',
                                                            product: item,
                                                            swatchEnable: false,
                                                            page: 'search',
                                                            image_sizes: '(max-width: 767px) 50vw, 25vw',
                                                            small_buttons_on_mobile: small_buttons_on_mobile,
                                                            scroll_snap: false,
                                                            type: 'standard',
                                                            wishlist: true,
                                                        %}
                                                    </div>

                                                {%- when 'article' -%}
                                                    <div class="o-layout__item u-1/{{ section.settings.grid_mobile }} {{ grid_item_width }}">

                                                        <a href="{{ item.url }}" class="search-grid-item__link">
                                                            <div class="search-grid-item search-grid-item--article">

                                                                <div class="label label--brand search-grid-item__label {% if settings.product_grid_label_position_right %}search-grid-item__label--position_right{% endif %}">
                                                                    <p class="label__text">{{ 'general.search.blog_label' | t }}</p>
                                                                </div>

                                                                <div class="o-ratio o-ratio--{{ settings.product_grid_image_size }}"{% if settings.product_grid_image_size == 'natural' %} style="padding-bottom:100%;"{% endif %}>

                                                                    <div class="o-ratio__content">

                                                                        <div class="search-grid-item__wrapper">

                                                                            <div class="search-grid-item__media">
                                                                                {%- if item.image -%}
                                                                                    <picture>
                                                                                        <source
                                                                                            srcset="{% render 'bgset_mobile', image: item.image.src %}"
                                                                                            media="all and (max-width: 540px)"
                                                                                        />
                                                                                        <source
                                                                                            srcset="{% render 'bgset', image: item.image.src %}"
                                                                                            sizes="{{ sizes }}"
                                                                                            media="all and (min-width: 541px)"
                                                                                        />
                                                                                        <img
                                                                                            class="search-grid-item__media__img"
                                                                                            src="{{ item.image.src | image_url: width: 300 }}"
                                                                                            width="300"
                                                                                            height="{{ 300 | divided_by: item.image.src.aspect_ratio | round }}"
                                                                                            alt="{{ item.image.alt }}"
                                                                                            loading="lazy"
                                                                                        />
                                                                                    </picture>
                                                                                {%- else -%}
                                                                                    <div class="search-grid-item__media__icon">
                                                                                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Polaris-icon/Major/Mono/Text Block"><path id="Icon" fill-rule="evenodd" clip-rule="evenodd" d="M19 0H1C0.448 0 0 0.448 0 1V19C0 19.552 0.448 20 1 20H19C19.552 20 20 19.552 20 19V1C20 0.448 19.552 0 19 0ZM2 18H18V2H2V18ZM5 11H15C15.552 11 16 10.552 16 10C16 9.448 15.552 9 15 9H5C4.448 9 4 9.448 4 10C4 10.552 4.448 11 5 11ZM5 7H15C15.552 7 16 6.552 16 6C16 5.448 15.552 5 15 5H5C4.448 5 4 5.448 4 6C4 6.552 4.448 7 5 7ZM10 13H5C4.448 13 4 13.448 4 14C4 14.552 4.448 15 5 15H9C9.552 15 10 14.552 10 14C10 13.448 9.552 13 9 13" fill="#637381"/><mask id="mask0_0:6439" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="20" height="20"><path id="Icon_2" fill-rule="evenodd" clip-rule="evenodd" d="M19 0H1C0.448 0 0 0.448 0 1V19C0 19.552 0.448 20 1 20H19C19.552 20 20 19.552 20 19V1C20 0.448 19.552 0 19 0ZM2 18H18V2H2V18ZM5 11H15C15.552 11 16 10.552 16 10C16 9.448 15.552 9 15 9H5C4.448 9 4 9.448 4 10C4 10.552 4.448 11 5 11ZM5 7H15C15.552 7 16 6.552 16 6C16 5.448 15.552 5 15 5H5C4.448 5 4 5.448 4 6C4 6.552 4.448 7 5 7ZM10 13H5C4.448 13 4 13.448 4 14C4 14.552 4.448 15 5 15H9C9.552 15 10 14.552 10 14C10 13.448 9.552 13 9 13" fill="white"/></mask><g mask="url(#mask0_0:6439)"></g></g></svg>
                                                                                    </div>
                                                                                {%- endif -%}
                                                                            </div>
                                                                            <div class="search-grid-item__content">
                                                                                {%- if section.settings.article_show_date or section.settings.article_show_author -%}
                                                                                    <div class="search-grid-item__content__meta">
                                                                                        {%- if section.settings.article_show_date -%}
                                                                                            <p class="search-grid-item__content__meta__item">{{ item.published_at | time_tag: format: 'date' }}</p>
                                                                                        {%- endif -%}
                                                                                        {%- if section.settings.article_show_author -%}
                                                                                            <p class="search-grid-item__content__meta__item">{{ item.author }}</p>
                                                                                        {%- endif -%}
                                                                                    </div>
                                                                                {%- endif -%}
                                                                                <h2 class="search-grid-item__content__title h5">{{ item.title | truncate: 250 | escape }}</h2>
                                                                            </div>

                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </a>

                                                    </div>

                                                {%- when 'page' -%}
                                                    <div class="o-layout__item u-1/{{ section.settings.grid_mobile }} {{ grid_item_width }}">

                                                        <a href="{{ item.url }}" class="search-grid-item__link">
                                                            <div class="search-grid-item search-grid-item--page">

                                                                <div class="label label--brand search-grid-item__label {% if settings.product_grid_label_position_right %}search-grid-item__label--position_right{% endif %}">
                                                                    <p class="label__text">{{ 'general.search.page_label' | t }}</p>
                                                                </div>

                                                                <div class="o-ratio o-ratio--{{ settings.product_grid_image_size }}"{% if settings.product_grid_image_size == 'natural' %} style="padding-bottom:100%;"{% endif %}>

                                                                    <div class="o-ratio__content">

                                                                        <div class="search-grid-item__wrapper">

                                                                            <div class="search-grid-item__media">
                                                                                <div class="search-grid-item__media__icon">
                                                                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="Polaris-icon/Major/Mono/Page"><path id="Icon" fill-rule="evenodd" clip-rule="evenodd" d="M4 18H16V5.414L12.586 2H4V18ZM17 20H3C2.447 20 2 19.553 2 19V1C2 0.447 2.447 0 3 0H13C13.266 0 13.52 0.105 13.707 0.293L17.707 4.293C17.895 4.48 18 4.734 18 5V19C18 19.553 17.553 20 17 20Z" fill="#637381"/><mask id="mask0_0:5785" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="0" width="16" height="20"><path id="Icon_2" fill-rule="evenodd" clip-rule="evenodd" d="M4 18H16V5.414L12.586 2H4V18ZM17 20H3C2.447 20 2 19.553 2 19V1C2 0.447 2.447 0 3 0H13C13.266 0 13.52 0.105 13.707 0.293L17.707 4.293C17.895 4.48 18 4.734 18 5V19C18 19.553 17.553 20 17 20Z" fill="white"/></mask><g mask="url(#mask0_0:5785)"></g></g></svg>
                                                                                </div>
                                                                            </div>
                                                                            <div class="search-grid-item__content">
                                                                                <h2 class="search-grid-item__content__title h5">{{ item.title | truncate: 250 | escape }}</h2>
                                                                            </div>

                                                                        </div>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </a>

                                                    </div>

                                                {%- endcase -%}

                                            {%- else -%}

                                                <div class="o-layout__item u-1/1">
                                                    <div class="collection-empty">
                                                        {%- if filter_count > 0 -%}
                                                            <a href="{{ routes.search_url }}?q={{ search.terms }}&sort_by={{ sort_by }}" class="link link--underline">{{ 'collections.general.filter_reset' | t }}</a>
                                                        {%- endif -%}
                                                        <h5 class="collection-empty__title">{{ 'collections.general.no_matches' | t }}</h5>
                                                    </div>
                                                </div>

                                            {%- endfor -%}

                                        </div>

                                {% comment %}Sidebar blocks count{% endcomment %}
                                {% if section.settings.show_sidebar %}
                                    </div>
                                </div>
                                {% endif %}
                                {% comment %}Sidebar blocks count{% endcomment %}
                            </div>

                        </div>

                        {% unless paginate.current_page == paginate.pages %}
                            <div id="collection-load_container">
                                <button class="cc-uppercase js-collection-load js-collection-load-next">
                                    <span class="cc-fs2">{{ 'collections.general.next_page' | t }}</span>
                                    <span class="product-form__add-btn__tick"><i class="icon icon--tick"></i></span>
                                    <div class="theme-spinner">
                                        <div class="theme-spinner__border"></div>
                                        <div class="theme-spinner__border"></div>
                                        <div class="theme-spinner__border"></div>
                                        <div class="theme-spinner__border"></div>
                                    </div>
                                </button>
                            </div>
                        {% endunless %}

                        {% if paginate.pages > 1 %}
                            <div data-pages="{{paginate.pages}}" class="collection-pagination"></div>
                                <div class="collection-pagination">
                                    <div class="container">
                                        <div class="pagination">
                                            <div class="pagination__items">
                                                {{ paginate | default_pagination:
                                                    next: '<i class="icon icon--right-t"></i><span class="icon-fallback__text">Next Page</span>',
                                                    previous: '<i class="icon icon--left-t"></i><span class="icon-fallback__text">Previous Page</span>'
                                                }}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endif %}

                    {% endpaginate %}

                {%- endif -%}
            {%- endif -%}

        </div>

        <div class="o-page-loader">
            <div role="progressbar" class="o-page-loader__holder">
                <span class="o-page-loader__line o-page-loader__line--1"></span>
                <span class="o-page-loader__line o-page-loader__line--2"></span>
            </div>
        </div>
    </dynamic-product-search>
</section>

<script>
    
    window.addEventListener('load', function(event) {
    prodResize(document, 'initalLoad');
    resizeButtons('initialLoad');
    collectionSpotsResize();
    toggleFunctionality();
    toggleInit();
    scrollSnapInit('load');
    initPageClick();

    }, true);

    window.addEventListener('resize', function(event) {
    collectionSpotsResize();
    }, true);
</script>

{% schema %}
{
    "name": "Search results",
    "class": "js-section__search",
    "settings": [
        {
            "type": "range",
            "id": "grid",
            "label": "Products per row (wide screens)",
            "min": 2,
            "max": 4,
            "step": 1,
            "default": 3
        },
        {
            "type": "select",
            "id": "grid_mobile",
            "label": "Products per row (mobile)",
            "default": "1",
            "options": [
                {
                    "label": "1",
                    "value": "1"
                },
                {
                    "label": "2",
                    "value": "2"
                }
            ]
        },
        {
            "type": "range",
            "id": "rows",
            "label": "Rows",
            "min": 2,
            "max": 12,
            "step": 1,
            "default": 6
        },
        {
            "type": "header",
            "content": "Filtering and sorting"
        },
        {
            "type": "checkbox",
            "id": "sort_enable",
            "label": "Enable sorting",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "show_sidebar",
            "label": "Enable filtering",
            "default": true,
            "info": "[Customize filters](/admin/menus)"
        },
        {
            "type": "checkbox",
            "id": "count",
            "label": "Show product count",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "show_swatches",
            "label": "Show swatches",
            "default": true
        },
        {
            "type": "select",
            "id": "filter_visibility",
            "label": "Filter visibility",
            "options": [
                {
                    "label": "Collapse all rows",
                    "value": "none"
                },
                {
                    "label": "Expand all rows",
                    "value": "all"
                },
                {
                    "label": "Expand first three rows",
                    "value": "three"
                }
            ],
            "default": "three"
        },
        {
            "type": "header",
            "content": "Blog card"
        },
        {
            "type": "checkbox",
            "id": "article_show_date",
            "default": true,
            "label": "Show date"
        },
        {
            "type": "checkbox",
            "id": "article_show_author",
            "default": false,
            "label": "Show author"
        }
    ]
}
{% endschema %}
