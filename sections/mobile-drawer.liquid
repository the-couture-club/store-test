<style>
.mobile-draw,
.mobile-draw .mfp-close {
    background-color: {{ settings.color_drawer_bg }};
}
.mobile-draw__localize {
    background-color: {{ settings.color_drawer_bg | color_darken: 3 }};
}
</style>

<div class="mobile-draw mobile-draw--{{ settings.color_drawer_style }} js-menu-draw mfp-hide">

    {%- liquid
        assign country_selector = false
        assign language_selector = false
        assign show_selectors = false
        assign both_selectors = false

        if section.settings.enable_country_selector and localization.available_countries.size > 1
            assign country_selector = true
        endif

        if section.settings.enable_language_selector and localization.available_languages.size > 1
            assign language_selector = true
        endif

        if country_selector or language_selector
            assign show_selectors = true
        endif

        if country_selector and language_selector
            assign both_selectors = true
        endif
    -%}

    {%- if show_selectors -%}
        <div class="mobile-draw__localize localize mobile-localize{% if both_selectors %} localize--double{% else %} localize--single{% endif %}">
            {%- form 'localization', id: 'MobileDrawerLocalizeForm', class: 'localize__form' -%}

                {%- if country_selector -%}
                    <div class="localize__item__wrapper js-localize-wrapper">
                        <h2 class="u-hidden-visually" id="country-heading-mobile">
                          {{ 'general.country.dropdown_label' | t }}
                        </h2>

                        <button type="button" class="localize__toggle js-localize-trigger" aria-expanded="false" aria-controls="country-list-mobile" aria-describedby="country-heading-mobile">{{ localization.country.name }} ({{ localization.country.currency.iso_code }} {{ localization.country.currency.symbol }})<i class="icon icon--down"></i></button>

                        <div id="country-list-mobile" class="localize__items localize__items--country js-localize-box o-list-bare">
                            <ul class="localize__items-wrapper">
                                {%- for country in localization.available_countries -%}
                                    <li class="localize__item">
                                        <a class="localize__item__link js-localize-item{% if country.iso_code == localization.country.iso_code %} selected{% endif %}" href="#" {% if country.iso_code == localization.country.iso_code %}aria-current="true"{% endif %} data-value="{{ country.iso_code }}">{{ country.name }} <span class="localization-form__country">({{ country.currency.iso_code }} {{ country.currency.symbol }})</span></a>
                                    </li>
                                {%- endfor -%}
                            </ul>
                        </div>

                        <input type="hidden" name="country_code" value="{{ localization.country.iso_code }}" data-disclosure-input>
                    </div>
                {%- endif -%}

                {%- if language_selector -%}
                    <div class="localize__item__wrapper js-localize-wrapper">

                        <h2 class="u-hidden-visually" id="lang-heading-mobile">{{ 'general.language.dropdown_label' | t }}</h2>

                        <button type="button" class="localize__toggle js-localize-trigger" aria-expanded="false" aria-controls="lang-list-mobile" aria-describedby="lang-heading-mobile">{{ localization.language.endonym_name | capitalize }}<i class="icon icon--down"></i></button>

                        <div id="lang-list-mobile" class="localize__items localize__items--lang js-localize-box o-list-bare">
                            <ul class="localize__items-wrapper">
                                {%- for language in localization.available_languages -%}
                                    <li class="localize__item">
                                        <a class="localize__item__link js-localize-item{% if language.iso_code == localization.language.iso_code %} selected{% endif %}" href="#" {% if language.iso_code == localization.language.iso_code %}aria-current="true"{% endif %} data-value="{{ language.iso_code }}">{{ language.endonym_name | capitalize }}</a>
                                    </li>
                                {%- endfor -%}
                            </ul>
                        </div>

                        <input type="hidden" name="locale_code" value="{{ localization.language.iso_code }}" data-disclosure-input>
                    </div>
                {%- endif -%}

            {%- endform -%}
        </div>
    {%- endif -%}

    <div data-navigation="root" class="mobile-draw__wrapper">
        <div class="mobile-draw__fixed mobile-draw__header">
            {%if section.settings.header_image != blank %}<img src="{{ section.settings.header_image | img_url: '100x' }}">{%endif%}
            <a class="cc-fs1 cc-uppercase cc-pointer js-close-mfp">{{ 'layout.drawers.close' | t }}</a>
        </div>
        <nav class="mobile-draw__nav mobile-nav">
            <div aria-toggled="false" class="mobile-draw__nav-gender mobile-draw__nav--title cc-uppercase">
            {% for link in linklists[section.settings.main_linklist].links %}
                <div>
                    <input type="radio" id="{{ link.title | handleize }}" name="gender_selection" {% if forloop.first %}checked=""{% endif %} value="{{ link.title | handleize}}" hidden="">
                    <label class="cc-pointer cc-fs1" for="{{ link.title | handleize }}">{{ link.title }}</label>
                </div>
            {% endfor %}
            </div>
            <ul class="mobile-nav__items o-list-bare">
                
                {% for link in linklists[section.settings.main_linklist].links %}
                    {% assign menuIndex = forloop.index %}
                    {% capture parentIndex %}{{ forloop.index }}{% endcapture %}
                    <li class="mobile-nav__item{% if link.active %} mobile-nav__item--active{% endif %}{% if link.links != blank %} mobile-nav__item--sub{% endif %} f-family--{{ settings.type_nav_style }} f-caps--{{ settings.type_nav_capitalize }} f-space--{{ settings.type_nav_letterspace }}"{% if link.links != blank %} aria-has-popup="true" aria-expanded="false" aria-controls="mobile-sub-{{ forloop.index }}"{% endif %}>
                        <a {% if link.links != blank %}data-child="{{menuIndex}}"{%endif%} href="{% unless link.links != blank %}{{ link.url }}{% endunless %}" class="cc-fs1 mobile-nav__link{% if link.links != blank %} mobile-nav__link--sub js-toggle-trigger{% endif %}">{{ link.title }}</a>
                        
                    </li>
                {% endfor %}
            </ul>
        </nav>

        <div class="mobile-draw__footer mobile-footer">
            {% if section.settings.show_contact_number or section.settings.show_contact_email %}
                <div class="mobile-footer__contact">
                    {% unless section.settings.contact_title == blank %}
                        <h4 class="mobile-footer__title">{{ section.settings.contact_title | escape }}</h4>
                    {% endunless %}
                    {% if section.settings.show_contact_number %}
                        <p class="mobile-footer__text"><a href="tel:{{ shop.address.phone }}" class="mobile-footer__text-link">{{ shop.address.phone }}</a></p>
                    {% endif %}
                    {% if section.settings.show_contact_email %}
                        <p class="mobile-footer__text"><a href="mailto:{{ shop.email }}" class="mobile-footer__text-link">{{ shop.email }}</a></p>
                    {% endif %}
                </div>
            {% endif %}
            {% if section.settings.show_social %}
                <ul class="mobile-draw__fixed mobile-footer__social-items o-list-bare">
                    {% unless settings.social_facebook_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_facebook_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--facebook" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Facebook</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_twitter_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_twitter_link }}" class="mobile-footer__social-link icon-fallback icon-custom" target="_blank" rel="noopener">
                                <svg class="icon icon-X" aria-hidden="true" focusable="false" role="presentation" xmlns="http://www.w3.org/2000/svg" width="1200" height="1227" viewBox="0 0 1200 1227" fill="none" style="width: 100%;height: 17px;">
                                    <path fill="currentColor" d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"></path>
                                </svg>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_pinterest_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_pinterest_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--pinterest" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Pinterest</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_instagram_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_instagram_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--instagram" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Instagram</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_tiktok_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_tiktok_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--tiktok" aria-hidden="true"></i>
                                <span class="icon-fallback__text">TikTok</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_tumblr_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_tumblr_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--tumblr" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Tumblr</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_snapchat_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_snapchat_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--snapchat" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Snapchat</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_youtube_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_youtube_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--youtube" aria-hidden="true"></i>
                                <span class="icon-fallback__text">YouTube</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_vimeo_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_vimeo_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--vimeo" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Vimeo</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_untappd_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_untappd_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--untappd" aria-hidden="true"></i>
                                <span class="icon-fallback__text">Untappd</span>
                            </a>
                        </li>
                    {% endunless %}
                    {% unless settings.social_linkedin_link == blank %}
                        <li class="mobile-footer__social-item">
                            <a href="{{ settings.social_linkedin_link }}" class="mobile-footer__social-link icon-fallback" target="_blank" rel="noopener">
                                <i class="icon icon--linkedin" aria-hidden="true"></i>
                                <span class="icon-fallback__text">LinkedIn</span>
                            </a>
                        </li>
                    {% endunless %}
                </ul>
            {% endif %}

        </div>

        {% if section.settings.cta_image or section.settings.cta_title != blank or section.settings.cta_text != blank or section.settings.cta_link != blank %}
            <div class="mobile-draw__cta mobile-cta">
                {% unless section.settings.cta_image_link == blank %}
                <a href="{{ section.settings.cta_image_link }}" class="mobile-cta__image-link">
                {% endunless %}
                    {% if section.settings.cta_image %}
                        <img
                            class="mobile-cta__image"
                            src="{{ section.settings.cta_image | image_url: width: 300 }}"
                            srcset="
                                {{ section.settings.cta_image | image_url: width: 180 }} 180w {{ 180 | divided_by: section.settings.cta_image.aspect_ratio | round }}h,
                                {{ section.settings.cta_image | image_url: width: 360 }} 360w {{ 360 | divided_by: section.settings.cta_image.aspect_ratio | round }}h,
                                {{ section.settings.cta_image | image_url: width: 540 }} 540w  {{ 540 | divided_by: section.settings.cta_image.aspect_ratio | round }}h,
                                {{ section.settings.cta_image | image_url: width: 720 }} 720w  {{ 720 | divided_by: section.settings.cta_image.aspect_ratio | round }}h,
                                {{ section.settings.cta_image | image_url: width: 900 }} 900w  {{ 900 | divided_by: section.settings.cta_image.aspect_ratio | round }}h
                            "
                            width="300"
                            height=" {{ 300 | divided_by: section.settings.cta_image.aspect_ratio | round }}"
                            alt="{{ section.settings.cta_image.alt | escape }}"
                            loading="lazy"
                        />
                    {% endif %}
                {% unless section.settings.cta_image_link == blank %}
                </a>
                {% endunless %}
                {% unless section.settings.cta_title == blank %}
                    <h4 class="mobile-cta__title h5">{{ section.settings.cta_title  | escape }}</h4>
                {% endunless %}
                {% unless section.settings.cta_text == blank %}
                    <div class="mobile-cta__text rte">
                        {{ section.settings.cta_text }}
                    </div>
                {% endunless %}
                {% unless section.settings.cta_link == blank %}
                    <div class="mobile-cta__link">
                        <a href="{{ section.settings.cta_link }}" class="link link--arrow">{{ section.settings.cta_link_title | escape }}</a>
                    </div>
                {% endunless %}
            </div>
        {% endif %}

    </div>

    {% for link in linklists[section.settings.main_linklist].links %}
    {% assign menuIndex = forloop.index %}
        {% if link.links != blank %}
            {% assign menuLink = link %}
            {% include 'navigation-menu', menuLink: link, menuCount: menuIndex, exploreLink: linklists[section.settings.explore_linklist], autoDropQuery: section.settings.auto_open_query %}
        {% endif %}
    {% endfor %}

</div>


{% schema %}
{
    "name": "Sidebar menu",
    "class": "js-section__mobile-draw",
    "settings": [
        {
            "type": "link_list",
            "id": "main_linklist",
            "label": "Menu",
            "default": "main-menu"
        },
        {
            "type": "link_list",
            "id": "explore_linklist",
            "label": "Explore Menu",
            "default": "main-menu"
        },
        {
            "type": "header",
            "content": "Auto Open",
            "info": "Automatically drop-down a menu"
        },
        {
            "type": "text",
            "id": "auto_open_query",
            "label": "Text",
            "default": "If a dropdown title contains the text above, it will automatically open."
        },
        {
            "type": "header",
            "content": "Contact info",
            "info": "Edit content in shop settings 'General'."
        },
        {
            "type": "text",
            "id": "contact_title",
            "label": "Heading",
            "default": "Contact"
        },
        {
            "type": "checkbox",
            "id": "show_contact_number",
            "label": "Show phone number",
            "default": true
        },
        {
            "type": "checkbox",
            "id": "show_contact_email",
            "label": "Show email",
            "default": true
        },
        {
            "type": "header",
            "content": "Country/Region Selector",
            "info": "To add a country/region, go to your [payment settings.](/admin/settings/payments)"
        },
        {
            "type": "checkbox",
            "id": "enable_country_selector",
            "label": "Enable country/region selector",
            "default": false
        },
        {
            "type": "header",
            "content": "Language Selector",
            "info": "To add a language, go to your [language settings.](/admin/settings/languages)"
        },
        {
            "type": "checkbox",
            "id": "enable_language_selector",
            "label": "Enable language selector",
            "default": false
        },
        {
            "type": "header",
            "content": "Social links",
            "info": "Edit content in theme 'Theme settings > Social'."
        },
        {
            "type": "checkbox",
            "id": "show_social",
            "label": "Show social links",
            "default": true
        },
        {
            "type": "header",
            "content": "Navigation Header - Image"
        },
        {
            "type": "image_picker",
            "id": "header_image",
            "label": "Image",
            "info": "1:1 recommended"
        }
    ]
}
{% endschema %}
